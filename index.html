<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aurora ISA Tracker â€“ Cinematic Edition</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />

<style>
:root{
  --cyan:#00eaff;
  --coral:#ff7f50;
  --teal:#00ffd0;
  --amber:#ffb347;
  --bg1:#060018;
  --bg2:#120035;
  --bg3:#001a33;
}

body{
  margin:0;padding:0;
  font-family:'Orbitron',sans-serif;
  background:linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
  background-size:600% 600%;
  animation:auroraDrift 40s ease-in-out infinite;
  color:#fff;
}

@keyframes auroraDrift{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

.container{
  padding:20px;
  max-width:1100px;
  margin:auto;
}

.section-title{
  font-size:23px;
  font-weight:700;
  color:var(--cyan);
  margin-top:35px;
  text-align:center;
  text-shadow:0 0 10px var(--cyan);
}

.card{
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.15);
  border-radius:16px;
  padding:20px;
  margin-bottom:25px;
  backdrop-filter:blur(8px);
  box-shadow:0 0 15px rgba(0,255,255,0.2);
}
/* ----- TABLE ----- */
.table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
.table th{
  padding:10px;
  background:rgba(0,200,255,0.3);
  border-bottom:1px solid var(--cyan);
}
.table td{
  padding:8px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}

/* ----- DIVIDEND ITEMS ----- */
.dividend-item{
  padding:10px 12px;
  background:rgba(255,255,255,0.07);
  border:1px solid rgba(255,255,255,0.15);
  border-radius:12px;
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
  font-size:14px;
}

/* ----- CAROUSEL ----- */
.carousel{
  display:flex;
  flex-direction:row;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  gap:40px;
  padding:25px 0 10px 10px;
  scroll-padding-left:20px;
  -webkit-overflow-scrolling:touch;
}
.carousel::after{
  content:"";
  flex:0 0 20px;
}

.carousel-card{
  flex:0 0 80%;
  scroll-snap-align:start;
  background:rgba(255,255,255,0.05);
  border-radius:14px;
  padding:18px;
  box-shadow:0 0 12px var(--cyan);
  transition:transform .3s ease;
}
.carousel-card:hover{
  transform:scale(1.04);
}
</style>
<script>
const AURORA_SYNC="https://raw.githubusercontent.com/webbchrisuk-max/Aurora/refs/heads/main/AuroraSync.json";

async function loadJSON(url){
  const r=await fetch(url+"?nocache="+Date.now());
  return await r.json();
}

async function initAurora(){
  const sync=await loadJSON(AURORA_SYNC);

  renderPortfolio(sync);
  renderWatchlist(sync);
  renderIG(sync);
  renderT212(sync);
  renderTesco(sync);
  renderREITs(sync);
  renderFinancials(sync);
  renderNextFive(sync);
  renderUpcoming(sync);
  renderYTD(sync);
  renderChart(sync);
}
</script>
</head>

<body onload="initAurora()">
<div class="container">

<h1 class="section-title">ðŸŒŒ Aurora ISA Tracker â€“ Cinematic Edition</h1>
<!-- PORTFOLIO SUMMARY -->
<div class="card">
  <h2 class="section-title">Portfolio Summary</h2>
  <div id="portfolio-summary"></div>
</div>

<!-- WATCHLIST SUMMARY -->
<div class="card">
  <h2 class="section-title">Watchlist Summary</h2>
  <div id="watchlist-summary"></div>
</div>
<!-- IG ISA -->
<div class="card">
  <h2 class="section-title">IG ISA Holdings</h2>
  <div class="carousel" id="ig-carousel"></div>
</div>

<!-- T212 ISA -->
<div class="card">
  <h2 class="section-title">Trade212 ISA Holdings</h2>
  <div class="carousel" id="t212-carousel"></div>
</div>
<!-- TESCO SIP & SAYE -->
<div class="card">
  <h2 class="section-title">Tesco Share Plan</h2>
  <div id="tesco-plan"></div>
</div>

<!-- REITS OUTLOOK -->
<div class="card">
  <h2 class="section-title">REITs Outlook</h2>
  <div id="reits-out"></div>
</div>

<!-- FINANCIALS OUTLOOK -->
<div class="card">
  <h2 class="section-title">Financials Outlook</h2>
  <div id="fin-out"></div>
</div>
<!-- NEXT 5 -->
<div class="card">
  <h2 class="section-title">Next 5 Dividends</h2>
  <div id="next5"></div>
</div>

<!-- UPCOMING -->
<div class="card">
  <h2 class="section-title">Upcoming Ex-Dividend Dates</h2>
  <div id="upcoming"></div>
</div>

<!-- CHART -->
<div class="card">
  <h2 class="section-title">12-Month Dividend Forecast</h2>
  <canvas id="divChart"></canvas>
</div>

<!-- YTD -->
<div class="card">
  <h2 class="section-title">Year-To-Date Income</h2>
  <div id="ytd"></div>
</div>
<script>

function renderPortfolio(sync){
  const p=sync.isa.portfolio_summary;
  document.getElementById("portfolio-summary").innerHTML=`
    <p><strong>Total Value:</strong> Â£${p.total_value.toFixed(2)}</p>
    <p><strong>Projected Annual Income:</strong> Â£${p.annual_income_gbp.toFixed(2)}</p>
  `;
}

function renderWatchlist(sync){
  document.getElementById("watchlist-summary").innerHTML=`
    <p>Top discounts, fair values & buy signals coming soon.</p>
  `;
}

function renderIG(sync){
  const ig=sync.isa.holdings.ig_isa;
  const box=document.getElementById("ig-carousel");
  box.innerHTML="";
  ig.forEach(h=>{
    const g=Number(h.gain_value||0);
    box.innerHTML+=`
      <div class="carousel-card">
        <h3>${h.ticker}</h3>
        <p>${h.name}</p>
        <p><strong>Â£${h.value.toFixed(2)}</strong></p>
        <p>Shares: ${h.shares}</p>
        <p>Gain: <span style="color:${g>=0?'lime':'red'}">Â£${g.toFixed(2)}</span></p>
      </div>
    `;
  });
}

function renderT212(sync){
  const t=sync.isa.holdings.trade212_isa;
  const box=document.getElementById("t212-carousel");
  box.innerHTML="";
  t.forEach(h=>{
    const g=Number(h.gain_value||0);
    box.innerHTML+=`
      <div class="carousel-card">
        <h3>${h.ticker}</h3>
        <p>${h.name}</p>
        <p><strong>Â£${h.value.toFixed(2)}</strong></p>
        <p>Shares: ${h.shares}</p>
        <p>Gain: <span style="color:${g>=0?'lime':'red'}">Â£${g.toFixed(2)}</span></p>
      </div>
    `;
  });
}

function renderTesco(sync){
  const t=sync.tesco;
  document.getElementById("tesco-plan").innerHTML=`
    <p><strong>Total Shares:</strong> ${t.sip.total_shares}</p>
    <p><strong>Current Price:</strong> ${t.current_price_pence}p</p>
    <p><strong>Indicative Value:</strong> Â£${t.indicative_value_gbp.toFixed(2)}</p>
    <p><strong>SAYE Options:</strong> ${t.saye.total_options}</p>
    <p><strong>SAYE Value:</strong> Â£${t.saye.indicative_scheme_value_gbp.toFixed(2)}</p>
  `;
}

function renderREITs(sync){
  const r=sync.reits_outlook;
  let html="";
  Object.entries(r).forEach(([k,v])=>{
    html+=`<p><strong>${k}</strong>: ${v.status} â€” ${v.notes}</p>`;
  });
  document.getElementById("reits-out").innerHTML=html;
}

function renderFinancials(sync){
  const f=sync.financials_outlook;
  let html="";
  Object.entries(f).forEach(([k,v])=>{
    html+=`<p><strong>${k}</strong>: ${v.status} â€” ${v.notes}</p>`;
  });
  document.getElementById("fin-out").innerHTML=html;
}

function renderNextFive(sync){
  const next=sync.isa.dividends.next_five;
  let html="";
  next.forEach(d=>{
    html+=`
      <div class="dividend-item">
        <div><strong>${d.ticker}</strong><br>Ex: ${d.ex_div_date}<br>Pay: ${d.pay_date}</div>
        <div>Â£${d.total_dividend.toFixed(2)}</div>
      </div>
    `;
  });
  document.getElementById("next5").innerHTML=html;
}

function renderUpcoming(sync){
  const all=sync.isa.dividends.upcoming;
  let html="";
  all.slice(0,5).forEach(d=>{
    html+=`
      <div class="dividend-item">
        <div><strong>${d.ticker}</strong><br>${d.name}<br>Ex: ${d.ex_div_date}</div>
        <div>Â£${d.total_dividend.toFixed(2)}</div>
      </div>
    `;
  });
  document.getElementById("upcoming").innerHTML=html;
}

function renderYTD(sync){
  const totals=sync.isa.dividends.monthly_totals;
  let y=0;
  Object.values(totals).forEach(v=>y+=v);
  document.getElementById("ytd").innerHTML=`<h3>Â£${y.toFixed(2)}</h3>`;
}

function renderChart(sync){
  const totals=sync.isa.dividends.monthly_totals;
  const labels=Object.keys(totals);
  const values=Object.values(totals);
  const ctx=document.getElementById("divChart").getContext("2d");

  new Chart(ctx,{
    type:"bar",
    data:{labels:labels, datasets:[{data:values}]},
    options:{plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
  });
}
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</div>
</body>
</html>