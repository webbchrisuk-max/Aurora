<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aurora ISA ‚Äì Nebula Frost Dark</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />

<style>
:root{
  --cyan:#5eefff;
  --teal:#4affe3;
  --amber:#ffc36a;
  --pink:#ff77ff;
  --green:#72ff72;
  --glass-dark: rgba(0,14,28,0.55);
  --glass-light: rgba(255,255,255,0.08);
  --bg:#020710;
}

/* ===== GLOBAL ===== */
body{
  margin:0;
  padding:0;
  font-family:'Orbitron',sans-serif;

  /* FROSTY MOUNTAIN HYPERNOVA BACKGROUND */
  background-image: url("https://github.com/webbchrisuk-max/Aurora/.png/A5E8897C-C701-4579-A603-E160E8EFD08D.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;

  color:#fff;
  overflow-x:hidden;
}

/* ===== CONTAINER ===== */
.wrapper{
  max-width:1400px;
  margin:auto;
  padding:20px;
}

/* ===== CARD ===== */
.card{
  background:var(--glass-dark);
  border:1px solid rgba(255,255,255,0.15);
  border-radius:18px;
  padding:22px;
  margin-bottom:25px;
  backdrop-filter:blur(10px);
  box-shadow:0 0 25px rgba(0,180,255,0.18);
}

.card h2{
  margin:0 0 12px 0;
  color:var(--cyan);
  text-shadow:0 0 10px var(--cyan);
}

/* ===== TABLE ===== */
table{
  width:100%;
  border-collapse:collapse;
  background:var(--glass-light);
  backdrop-filter:blur(6px);
}

th{
  color:var(--teal);
  padding:10px;
  border-bottom:1px solid rgba(255,255,255,0.2);
}

td{
  padding:8px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}

/* ===== EXPANDERS ===== */
.toggle{
  margin-top:15px;
  padding:10px 20px;
  background:var(--glass-light);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:30px;
  text-align:center;
  color:var(--cyan);
  cursor:pointer;
}

.expander{
  max-height:0;
  overflow:hidden;
  transition:max-height .35s ease;
}
</style>

<script>
const URL_JSON = "https://raw.githubusercontent.com/webbchrisuk-max/Aurora/main/AuroraSync.json";

async function loadJSON(){
  const r = await fetch(URL_JSON + "?nocache=" + Date.now());
  return r.json();
}

async function init(){
  const sync = await loadJSON();
  renderOverview(sync);
  renderHoldings(sync);
}

/* ===== OVERVIEW CARD ===== */
function renderOverview(sync){
  const ig = sync?.isa?.holdings?.ig_isa || [];
  const t2 = sync?.isa?.holdings?.trade212_isa || [];

  const igVal = ig.reduce((a,h)=>a + (+h.value||0),0);
  const t2Val = t2.reduce((a,h)=>a + (+h.value||0),0);
  const total = igVal + t2Val;

  document.getElementById("overview").innerHTML = `
    <p><strong>IG ISA:</strong> ¬£${igVal.toFixed(2)}</p>
    <p><strong>Trade212 ISA:</strong> ¬£${t2Val.toFixed(2)}</p>
    <p style="color:var(--cyan); font-size:1.2rem; margin-top:10px;">
      <strong>Total Portfolio:</strong> ¬£${total.toFixed(2)}
    </p>
  `;
}

/* ===== HOLDINGS TABLE ===== */
function renderHoldings(sync){
  const ig = sync?.isa?.holdings?.ig_isa || [];
  const t2 = sync?.isa?.holdings?.trade212_isa || [];
  const all = [...ig,...t2];

  let html = `
    <table>
      <tr>
        <th>Ticker</th>
        <th>Shares</th>
        <th>Value</th>
        <th>Gain</th>
      </tr>
  `;

  all.forEach(h=>{
    const col = h.gain_value >=0 ? "var(--green)" : "var(--pink)";
    html += `
      <tr>
        <td>${h.ticker}</td>
        <td>${h.shares}</td>
        <td>¬£${h.value.toFixed(2)}</td>
        <td style="color:${col};">¬£${h.gain_value.toFixed(2)}</td>
      </tr>`;
  });

  html += `</table>`;
  document.getElementById("holdings-full").innerHTML = html;
}

/* ===== EXPANDERS ===== */
document.addEventListener("click",e=>{
  if(!e.target.classList.contains("toggle")) return;
  const box = e.target.nextElementSibling;
  box.style.maxHeight = box.style.maxHeight ? null : box.scrollHeight + "px";
});
</script>

</head>
<body onload="init()">

<div class="wrapper">

  <!-- TITLE -->
  <h1 style="color:var(--cyan); text-align:center; text-shadow:0 0 18px var(--cyan);">
    ‚ùÑ Aurora ISA ‚Äî Nebula Frost Dark
  </h1>

  <!-- ===== OVERVIEW CARD ===== -->
  <div class="card">
    <h2>üìä ISA Overview</h2>
    <div id="overview"></div>
  </div>

  <!-- ===== HOLDINGS CARD ===== -->
  <div class="card">
    <h2>üìà ISA Holdings</h2>

    <div class="toggle">Show Holdings ‚ñº</div>
    <div class="expander">
      <div id="holdings-full" style="padding-top:15px;"></div>
    </div>
  </div>

</div>

</body>
</html>
