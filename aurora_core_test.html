<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aurora Tracker – Core v1</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<!-- ===================== SECTION: CORE THEME ===================== -->
<style>
:root {
  --cyan: #00ffff;
  --green: #00ff99;
  --bg1: #060018;
  --bg2: #120035;
  --bg3: #001a33;
}

body {
  margin: 0;
  font-family: "Orbitron", sans-serif;
  background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3));
  background-size: 600% 600%;
  animation: auroraDrift 45s ease-in-out infinite;
  color: #fff;
  text-align: center;
  min-height: 100vh;
  overflow-x: hidden;
}
@keyframes auroraDrift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

h1 {
  font-size: 1.8rem;
  margin-top: 25px;
  text-shadow: 0 0 14px rgba(0,255,255,0.7);
}

.card {
  background: rgba(10,10,30,0.65);
  border: 1px solid rgba(0,255,255,0.25);
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(0,255,255,0.15);
  backdrop-filter: blur(6px);
  padding: 20px;
  max-width: 420px;
  margin: 20px auto;
  text-align: left;
}
.label { color: var(--cyan); }
.value { float: right; color: var(--green); }
#status { margin-top: 10px; font-size: 0.9rem; color: #aaa; }
#auroraSyncDot {
  display:inline-block;width:10px;height:10px;border-radius:50%;
  background:var(--cyan);box-shadow:0 0 10px var(--cyan);
  margin-right:6px;vertical-align:middle;
}
</style>
</head>
<body>
<h1>Aurora Tracker – Core v1</h1>
<div id="status"><span id="auroraSyncDot"></span>Connecting to AuroraSync.json...</div>

<div class="card">
  <h2>Portfolio Summary</h2>
  <p><span class="label">Target</span><span class="value" id="targetValue">--</span></p>
  <p><span class="label">Dividend Yield</span><span class="value" id="divYield">--</span>%</p>
</div>

<div class="card">
  <h2>ISA Balances</h2>
  <p><span class="label">IG ISA</span><span class="value" id="igBalance">--</span></p>
  <p><span class="label">Trade212 ISA</span><span class="value" id="t212Balance">--</span></p>
</div>

<!-- ===================== SECTION: SCRIPT ===================== -->
<script>
const JSON_URL = "https://raw.githubusercontent.com/webbchrisuk-max/Aurora/refs/heads/main/AuroraSync.json?ts=";

async function loadAuroraData() {
  const status = document.getElementById("status");
  const dot = document.getElementById("auroraSyncDot");
  try {
    const res = await fetch(JSON_URL + Date.now(), { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();
    console.log("✅ AuroraSync loaded:", data);

    document.getElementById("targetValue").textContent = data?.isa?.portfolio_summary?.annual_target_value?.toLocaleString() ?? "N/A";
    document.getElementById("divYield").textContent = data?.isa?.portfolio_summary?.dividend_yield ?? "N/A";
    document.getElementById("igBalance").textContent = "£" + (data?.isa?.ig_isa?.balance?.toLocaleString() ?? "N/A");
    document.getElementById("t212Balance").textContent = "£" + (data?.isa?.trade212_isa?.balance?.toLocaleString() ?? "N/A");

    dot.style.background = "#00ff99";
    dot.style.boxShadow = "0 0 10px #00ff99";
    status.textContent = "✅ Synced successfully with AuroraSync.json";
  } catch (err) {
    console.error("❌ Sync failed:", err);
    dot.style.background = "#ff3333";
    dot.style.boxShadow = "0 0 15px #ff3333";
    status.textContent = "❌ Failed to fetch AuroraSync.json — check console for details.";
  }
}

window.addEventListener("load", loadAuroraData);
</script>
</body>
</html>
