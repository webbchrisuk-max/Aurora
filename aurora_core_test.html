<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aurora Connection Test</title>
<style>
body {
  background: #000;
  color: #0ff;
  font-family: monospace;
  padding: 20px;
}
h1 { color: #fff; }
.status { margin-top: 10px; }
pre { background: #111; padding: 10px; border-radius: 6px; }
</style>
</head>
<body>
<h1>üîó Aurora Connection Test</h1>
<div id="status">Connecting...</div>
<pre id="output"></pre>

<script>
const JSON_URL = "AuroraSync.json?ts=" + Date.now();

async function testConnection() {
  const status = document.getElementById("status");
  const output = document.getElementById("output");

  try {
    const res = await fetch(JSON_URL, { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();

    status.textContent = "‚úÖ Connected successfully!";
    output.textContent = JSON.stringify({
      ig_isa_balance: data?.isa?.ig_isa?.balance,
      trade212_balance: data?.isa?.trade212_isa?.balance,
      dividend_yield: data?.isa?.portfolio_summary?.dividend_yield
    }, null, 2);
  } catch (err) {
    status.textContent = "‚ùå Failed to connect: " + err.message;
    output.textContent = err.stack;
  }
}

testConnection();
</script>
</body>
</html>
