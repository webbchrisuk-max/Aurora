<!-- ===================== SECTION: Aurora Monzo Dashboard v1.4 (Manual Pot Carousel Edition) ===================== -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aurora Monzo Dashboard v1.4 ‚Äì Neon Blue + Coral Glow</title>

<!-- ===================== SECTION: FONTS & BASE ===================== -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@500&display=swap" rel="stylesheet" />

<style>
:root {
  --bg-color: #05060a;
  --card-bg: rgba(255,255,255,0.05);
  --text-color: #ffffff;
  --glow-cyan: #00fff7;
  --glow-coral: #ff6f61;
}

/* ===================== SECTION: GLOBAL ===================== */
body{
  margin:0;
  padding:0;
  font-family:'Inter',sans-serif;
  color:var(--text-color);
  overflow-x:hidden;
  min-height:100vh;
  position:relative;
}
body::before{
  content:"";
  position:fixed;
  top:0;left:0;right:0;bottom:0;
  z-index:-1;
  background:radial-gradient(circle at top right,#05060a 0%,#090d16 70%);
  animation:auroraPulse 18s ease-in-out infinite alternate;
  background-attachment:fixed;
  will-change:background;
}
@keyframes auroraPulse{
  0%{background:radial-gradient(circle at top right,#05060a 0%,#090d16 70%);}
  100%{background:radial-gradient(circle at bottom left,#0b1020 0%,#04060a 80%);}
}

h1,h2,h3{
  font-family:'Orbitron',sans-serif;
  text-transform:uppercase;
  letter-spacing:1px;
}

.container{max-width:1100px;margin:auto;padding:20px;}

/* ===================== SECTION: HEADER ===================== */
header{
  text-align:center;
  padding:25px 10px;
  background:linear-gradient(90deg,var(--glow-cyan),var(--glow-coral));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:pulseGlow 4s ease-in-out infinite;
}
@keyframes pulseGlow{
  0%,100%{text-shadow:0 0 10px var(--glow-coral),0 0 20px var(--glow-cyan);}
  50%{text-shadow:0 0 25px var(--glow-coral),0 0 35px var(--glow-cyan);}
}

/* ===================== SECTION: CARD DESIGN ===================== */
.card{
  background:var(--card-bg);
  border-radius:14px;
  padding:18px 20px;
  margin-bottom:15px;
  box-shadow:0 0 15px rgba(0,255,247,0.08);
  backdrop-filter:blur(6px);
  transition:transform .25s ease,box-shadow .25s ease;
}
.card:hover{transform:translateY(-2px);box-shadow:0 0 18px rgba(255,111,97,0.25);}

/* ===================== SECTION: POT CAROUSEL (MANUAL SCROLL) ===================== */
.pot-carousel{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  gap:20px;
  padding:10px 0 20px 0;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
}
.pot-carousel::-webkit-scrollbar{display:none;}

.pot-card{
  flex:0 0 85%;
  scroll-snap-align:center;
  background:rgba(255,255,255,0.05);
  border-radius:14px;
  padding:20px;
  text-align:center;
  box-shadow:0 0 15px var(--glow-cyan);
  animation:potPulse 2s infinite alternate;
  transition:transform 0.3s ease;
}
.pot-card:hover{transform:scale(1.03);}
@keyframes potPulse{from{box-shadow:0 0 15px var(--glow-cyan);}to{box-shadow:0 0 25px var(--glow-coral);}}
.pot-card h3{color:var(--glow-coral);text-shadow:0 0 8px var(--glow-coral);}
.pot-progress{height:10px;border-radius:8px;background:rgba(255,255,255,0.1);margin-top:10px;overflow:hidden;}
.pot-fill{height:100%;background:linear-gradient(90deg,var(--glow-cyan),var(--glow-coral));border-radius:8px;transition:width .8s ease-in-out;}

/* ===================== SECTION: TABLES ===================== */
table{width:100%;border-collapse:collapse;margin-top:10px;font-size:.95rem;}
th,td{text-align:left;padding:8px;}
th{color:var(--glow-cyan);border-bottom:1px solid rgba(255,255,255,0.1);}
tr:nth-child(even){background:rgba(255,255,255,0.03);}

/* ===================== SECTION: RESPONSIVE ===================== */
@media(max-width:600px){.container{padding:10px;}h1{font-size:1.4em;}}
</style>
</head>

<body>
<header>
  <h1>Aurora Monzo Dashboard</h1>
  <h3>Live Data Sync ‚Äì Neon Blue + Coral Glow Edition</h3>
</header>

<div class="container">

  <section id="account-summary" class="card">
    <h2>üè¶ Main Account</h2>
    <p><strong>Balance:</strong> ¬£<span id="mainBalance">0.00</span></p>
    <p><strong>Payday:</strong> <span id="payday">‚Äì</span> (Received ¬£<span id="payReceived">0.00</span>)</p>
  </section>

  <section id="flex-summary" class="card">
    <h2>üí≥ Flex Summary</h2>
    <p><strong>Total Balance:</strong> ¬£<span id="flexBalance">0.00</span></p>
    <p><strong>Next Payment:</strong> ¬£419.00 on 2025-12-01</p>
  </section>

  <section id="pots-section" class="card">
    <h2>üí∞ Pots Overview</h2>
    <div class="pot-carousel" id="potCarousel"></div>
  </section>

  <section id="direct-debits" class="card">
    <h2>üîÅ Direct Debits</h2>
    <table id="ddTable">
      <thead><tr><th>Payee</th><th>Amount (¬£)</th><th>Due Date</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="subscriptions" class="card">
    <h2>üì± Subscriptions</h2>
    <table id="subTable">
      <thead><tr><th>Service</th><th>Amount (¬£)</th><th>Renewal Date</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="recent-transactions" class="card">
    <h2>üßæ Recent Transactions</h2>
    <table id="txnTable">
      <thead><tr><th>Date</th><th>Merchant</th><th>Amount (¬£)</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <footer style="text-align:center;margin-top:25px;color:#aaa;font-size:.85em;">
    <span id="lastUpdated">Loading data‚Ä¶</span>
  </footer>
</div>

<!-- ===================== SECTION: SCRIPT ===================== -->
<script>
async function loadAuroraMonzo(){
  const status=document.getElementById("lastUpdated");
  const monzoJSON="https://raw.githubusercontent.com/webbchrisuk-max/Aurora/refs/heads/main/AuroraMonzo.json";
  try{
    const res=await fetch(monzoJSON+"?nocache="+Date.now());
    if(!res.ok)throw new Error("HTTP "+res.status);
    const data=await res.json();
    const core=data.monzo.account_core;
    const pots=core.pots||{};
    const dd=data.monzo.direct_debits||[];
    const subs=data.monzo.subscriptions_from_main||[];
    const txns=data.monzo.transactions_feed.recent||[];

    document.getElementById("mainBalance").textContent=core.main_balance.toFixed(2);
    document.getElementById("payday").textContent=core.payday_last;
    document.getElementById("payReceived").textContent=core.income_received.toFixed(2);
    document.getElementById("flexBalance").textContent=(pots.FlexRepayment||0).toFixed(2);

    // DIRECT DEBITS
    const ddBody=document.querySelector("#ddTable tbody");
    ddBody.innerHTML="";
    dd.forEach(i=>{
      const r=document.createElement("tr");
      r.innerHTML=`<td>${i.payee}</td><td>${i.amount.toFixed(2)}</td><td>${i.due_date}</td>`;
      ddBody.appendChild(r);
    });

    // SUBSCRIPTIONS
    const subBody=document.querySelector("#subTable tbody");
    subBody.innerHTML="";
    subs.forEach(i=>{
      const r=document.createElement("tr");
      r.innerHTML=`<td>${i.service}</td><td>${i.amount.toFixed(2)}</td><td>${i.renewal_date}</td>`;
      subBody.appendChild(r);
    });

    // ‚úÖ SAFE TRANSACTION HANDLER
    const txnBody=document.querySelector("#txnTable tbody");
    txnBody.innerHTML="";
    txns.slice(0,5).forEach(tx=>{
      const date=tx.date||"‚Äî";
      const merchant=tx.merchant||"Unknown";
      const amount=(typeof tx.amount==="number")?tx.amount.toFixed(2):"0.00";
      const r=document.createElement("tr");
      r.innerHTML=`<td>${date}</td><td>${merchant}</td><td>${amount}</td>`;
      txnBody.appendChild(r);
    });

    status.textContent="‚úÖ Data loaded ‚Äì "+new Date().toLocaleString();
    renderPotCarousel(pots);
  }catch(err){
    console.error("‚ùå Aurora Monzo load error:",err);
    status.textContent="‚ùå Failed to load Monzo data: "+err.message;
  }
}

/* ===================== SECTION: POT CAROUSEL FUNCTION ===================== */
function renderPotCarousel(pots){
  const carousel=document.getElementById("potCarousel");
  carousel.innerHTML="";
  const goals={
    FlexRepayment:419,DirectDebits:416,Holiday:800,
    CommentaryCityFC:500,IGTrading:400,CarMaintenance:400,
    WorkBuffer:65,Savings:1000
  };

  Object.entries(pots).forEach(([name,balance])=>{
    if(name==="FlexRepayment")return;
    const goal=goals[name]||500;
    const pct=Math.min((balance/goal)*100,100).toFixed(1);
    const card=document.createElement("div");
    card.className="pot-card";
    card.innerHTML=`
      <h3>${name}</h3>
      <p>¬£${balance.toFixed(2)} / ¬£${goal}</p>
      <div class="pot-progress"><div class="pot-fill" style="width:${pct}%"></div></div>`;
    carousel.appendChild(card);
  });
}

document.addEventListener("DOMContentLoaded",loadAuroraMonzo);
</script>
</body>
</html>
<!-- ===================== END: Aurora Monzo Dashboard v1.4 (Manual Pot Carousel Edition) ===================== -->
