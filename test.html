<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aurora JSON Test</title>
<style>
  body {
    background: #000814;
    color: #00ffff;
    font-family: monospace;
    text-align: center;
    padding: 30px;
  }
  .card {
    border: 1px solid #00ffff;
    border-radius: 8px;
    padding: 20px;
    margin: 20px auto;
    max-width: 400px;
    box-shadow: 0 0 15px #00ffff44;
  }
  .error { color: #ff4444; }
</style>
</head>
<body>
<h1>üîó Aurora JSON Test</h1>
<p id="status">Checking connection...</p>

<div class="card" id="output">
  <p><strong>Target:</strong> <span id="targetValue">--</span></p>
  <p><strong>Dividend Yield:</strong> <span id="divYield">--</span>%</p>
  <p><strong>IG ISA Balance:</strong> ¬£<span id="igBalance">--</span></p>
  <p><strong>Trade212 Balance:</strong> ¬£<span id="t212Balance">--</span></p>
</div>

<script>
const JSON_URL = "https://raw.githubusercontent.com/webbchrisuk-max/Aurora/refs/heads/main/AuroraSync.json?ts=" + Date.now();

async function testConnection() {
  const status = document.getElementById("status");
  try {
    const res = await fetch(JSON_URL, { cache: "no-store" });
    if (!res.ok) throw new Error("HTTP " + res.status);

    const data = await res.json();
    console.log("‚úÖ Aurora JSON loaded:", data);

    document.getElementById("targetValue").textContent = data?.isa?.portfolio_summary?.annual_target_value ?? "N/A";
    document.getElementById("divYield").textContent = data?.isa?.portfolio_summary?.dividend_yield ?? "N/A";
    document.getElementById("igBalance").textContent = data?.isa?.ig_isa?.balance ?? "N/A";
    document.getElementById("t212Balance").textContent = data?.isa?.trade212_isa?.balance ?? "N/A";
    status.textContent = "‚úÖ JSON loaded successfully!";
  } catch (err) {
    console.error(err);
    status.innerHTML = "‚ùå <span class='error'>Failed to load AuroraSync.json</span>";
  }
}

testConnection();
</script>
</body>
</html>
